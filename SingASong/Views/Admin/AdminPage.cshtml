@{
    ViewData["Title"] = "Admin Page";
}

@model List<Album> 

<link rel="stylesheet" href="~/css//adminpage.css" />

<div class="navigation-bar">
    <a asp-controller="Admin" asp-action="AdminPage"><i class="fa-solid fa-home"></i>Home</a>
    <a href="#" class="add-album-button"><i class="fa-solid fa-plus"></i>Add</a>
    <a href="#"><i class="fa-solid fa-pen"></i>Update</a>
    <a href="#"><i class="fa-solid fa-download"></i>Downloads</a>
    <a href="#"><i class="fa-solid fa-file-circle-check"></i>Generate Report</a>
    <a href="#"><i class="fa-solid fa-user"></i>View Profile</a>

    @* <a href="#" onclick="openDeleteModal()"><i class="fa-solid fa-trash"></i>Delete</a> *@


</div>

<div class="search-bar">
    <form asp-action="AdminPage" method="get" class="form-inline">
        <input name="searchAlbumId" class="form-control mr-sm-2" type="search" placeholder="Search by Album ID" aria-label="Search">
        <button class="btn btn-outline-success d-flex justify-content-center align-items-center my-sm-0" type="submit">Search</button>
    </form>
</div>

<div class="product-container">
    @foreach (var album in Model)
    {
        <div class="product">
            <img src="https://placekitten.com/50/56" alt="Album Cover">
            <div class="product-details">
                <h3>@album.AlbumName</h3>
                <p>Album ID: @album.AlbumID</p>
                <p>Artist: @album.ArtistName</p>
                <p>Price: ₹@album.AlbumPrice.ToString("0.00")</p>
                <p>Rating: <span>@album.AlbumRating</span>/5</p>
            </div>
            <form method="post" asp-controller="Orders" asp-action="Cart">
                <input type="hidden" name="albumID" value="@album.AlbumID" />
                <button type="submit" class="add-to-cart">Add to Cart</button>
            </form>
            <button type="submit" class="delete-button" style="margin-left: 10px" onclick="openDeleteModal('@album.AlbumID')">Delete</button>
        </div>
    }
</div>





<div id="addAlbumModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <form method="post" asp-action="AddAlbum">
            <div>
                <label for="newAlbumName">Album Name:</label>
                <input type="text" class="newAlbum" name="AlbumName" required />
            </div>
            <div>
                <label for="newArtistName">Artist Name:</label>
                <input type="text" class="newAlbum" name="ArtistName" required />
            </div>
            <div>
                <label for="newAlbumPrice">Album Price:</label>
                <input type="number" class="newAlbum" name="AlbumPrice" step="0.01" required />
            </div>

            <div>
                <label for="newAlbumRating">Album Rating:</label>
                <input type="number" class="newAlbum" name="AlbumRating" step="0.01" required />
            </div>

            <button type="submit" class="add-to-cart">Add Album</button>
        </form>
    </div>
</div>




<div id="deleteAlbumModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeDeleteModal()">&times;</span>
        <form id="deleteForm" method="post" asp-action="DeleteAlbum">
            <input type="hidden" id="deleteAlbumID" name="albumID" />
            <p>Are you sure you want to delete this album?</p>
            <button type="submit" class="add-to-cart">Delete Album</button>
        </form>
    </div>
</div>




<script>
    var modal = document.getElementById("addAlbumModal");

    var btn = document.getElementsByClassName("add-album-button")[0];
    function closeModal() {
        modal.style.display = "none";
    }
    btn.onclick = function () {
        modal.style.display = "block";
    }
    window.onclick = function (event) {
        if (event.target == modal) {
            closeModal();
        }
    }


    function openDeleteModal(albumID) {
        var deleteModal = document.getElementById("deleteAlbumModal");
        deleteModal.style.display = "block";

        var deleteAlbumIDInput = document.getElementById("deleteAlbumID");
        deleteAlbumIDInput.value = albumID;
    }

    function closeDeleteModal() {
        var deleteModal = document.getElementById("deleteAlbumModal");
        deleteModal.style.display = "none";
    }

    window.onclick = function (event) {
        var deleteModal = document.getElementById("deleteAlbumModal");
        if (event.target == deleteModal) {
            closeDeleteModal();
        }
    }
   
</script>
